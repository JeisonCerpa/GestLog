<Window x:Class="GestLog.Views.Tools.GestionEquipos.GestionarPlanesDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:GestLog.Converters"
        Title="Gestión de Planes de Cronograma" 
        Height="600" Width="900"
        WindowStartupLocation="CenterOwner"
        Background="#F5F5F5">
      <Window.Resources>
        <converters:BooleanToStringConverter x:Key="BooleanToStringConverter" />
        <converters:DiaProgramadoToNombreDiaConverter x:Key="DiaProgramadoToNombreDiaConverter" />
        <converters:BooleanToColorConverter x:Key="BooleanToColorConverter" />
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Encabezado -->
        <TextBlock Grid.Row="0" Text="Gestión de Planes de Cronograma" 
                   FontSize="18" FontWeight="Bold" 
                   Margin="0,0,0,20" 
                   Foreground="#333"/>

        <!-- Lista de planes -->
        <Border Grid.Row="1" Background="White" CornerRadius="6" Padding="10" BorderBrush="#DDD" BorderThickness="1">
            <ListView x:Name="PlanesListView" ItemsSource="{Binding Planes}" SelectionMode="Single">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="Código Equipo" DisplayMemberBinding="{Binding CodigoEquipo}" Width="120"/>
                        <GridViewColumn Header="Descripción" DisplayMemberBinding="{Binding Descripcion}" Width="200"/>
                        <GridViewColumn Header="Responsable" DisplayMemberBinding="{Binding Responsable}" Width="150"/>
                        <GridViewColumn Header="Día Programado" Width="120">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock>
                                        <TextBlock.Text>
                                            <MultiBinding StringFormat="{}{0} ({1})">
                                                <Binding Path="DiaProgramado"/>
                                                <Binding Path="DiaProgramado" Converter="{StaticResource DiaProgramadoToNombreDiaConverter}"/>
                                            </MultiBinding>
                                        </TextBlock.Text>
                                    </TextBlock>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn Header="Estado" Width="80">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Activo, Converter={StaticResource BooleanToStringConverter}}" 
                                               Foreground="{Binding Activo, Converter={StaticResource BooleanToColorConverter}}"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn Header="Fecha Creación" DisplayMemberBinding="{Binding FechaCreacion, StringFormat='dd/MM/yyyy'}" Width="100"/>
                    </GridView>
                </ListView.View>
            </ListView>
        </Border>        <!-- Botones de acción -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
            <Button Content="Activar/Desactivar" Padding="12,6" Margin="5" 
                    Click="ToggleActivoButton_Click" Background="#FFC107" Foreground="White" BorderThickness="0"/>
            <Button Content="Eliminar" Padding="12,6" Margin="5" 
                    Click="EliminarButton_Click" Background="#DC3545" Foreground="White" BorderThickness="0"/>
        </StackPanel>

        <!-- Estado y botones de cierre -->
        <Grid Grid.Row="3" Margin="0,20,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <TextBlock x:Name="StatusTextBlock" Grid.Column="0" Text="Listo" VerticalAlignment="Center" Foreground="#666"/>
              <Button Grid.Column="1" Content="Cerrar" Padding="12,6" 
                    Click="CerrarButton_Click" Background="#6C757D" Foreground="White" BorderThickness="0"/>
        </Grid>
    </Grid>
</Window>
