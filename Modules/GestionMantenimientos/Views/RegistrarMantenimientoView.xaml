<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:GestLog.Modules.GestionMantenimientos.ViewModels"
        x:Class="GestLog.Modules.GestionMantenimientos.Views.RegistrarMantenimientoView"
        Title="Registrar Mantenimiento" Height="450" Width="600">
    <Border Background="#FAFAFA" Padding="12">
        <Grid>
            <StackPanel>
                <TextBlock Text="Registrar mantenimiento" FontSize="18" FontWeight="Bold" Margin="0,0,0,8" />
                <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                    <TextBlock Text="Código:" VerticalAlignment="Center" />
                    <TextBox Width="200" Margin="8,0,0,0" Text="{Binding Seguimiento.Codigo, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                    <TextBlock Text="Nombre:" VerticalAlignment="Center" />
                    <TextBox Width="300" Margin="8,0,0,0" Text="{Binding Seguimiento.Nombre, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                </StackPanel>
                <DataGrid ItemsSource="{Binding Tareas}" AutoGenerateColumns="False" CanUserAddRows="False" Height="200" Margin="0,8,0,8">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Tarea" Binding="{Binding NombreTarea, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="*" />
                        <DataGridCheckBoxColumn Header="Completada" Binding="{Binding Completada, Mode=TwoWay}" Width="100" />
                        <DataGridTextColumn Header="Observaciones" Binding="{Binding Observaciones, Mode=TwoWay}" Width="200" />
                        <DataGridTextColumn Header="Repuesto" Binding="{Binding RepuestoUsado, Mode=TwoWay}" Width="120" />
                        <DataGridTextColumn Header="Duración (min)" Binding="{Binding DuracionMinutos, Mode=TwoWay}" Width="120" />
                        <DataGridTemplateColumn Header="Acciones" Width="80">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Eliminar" Command="{Binding DataContext.RemoveTareaCommand, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" CommandParameter="{Binding}" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Agregar tarea" Command="{Binding AddTareaCommand}" Margin="0,0,8,0" />
                    <Button Content="Guardar" Command="{Binding SaveCommand}" Margin="0,0,8,0" />
                    <Button Content="Cancelar" Command="{Binding CancelCommand}" />
                </StackPanel>
            </StackPanel>
        </Grid>
    </Border>
</Window>
